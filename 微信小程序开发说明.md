1 系统定义  
1.1	设计实现的功能  
1.	在终端编译运行c语言程序，使小车能够自动避障，走出迷宫。  
2.	使用nodejs在小车终端搭建web服务器，可以接受http及websocket请求。  
3.	使用微信小程序通过局域网控制小车前后左右运行  

1.2	可行性分析  
1.	树莓派系统中自带有gcc编译器，支持编译运行c语言控制GPIO引脚，从而实现小车运行。  
2.	在树莓派系统中自带有python开发环境，在此环境基础上可自行搭建NodeJS环境，创建web服务器。  
3.	在npm中有rpio包，是一个高性能的Nodejs插件，可以实现Nodejs控制树莓派小车的gpio引脚。  
4.	微信小程序支持同一局域网内的设备进行网络通信，可实现操控智能硬件、为智能硬件配置网络等功能。  

1.3	需求分析    
1.	功能性需求   
1）	小车可自动避障，走出迷宫  
2）	可通过小程序客户端控制小车运行  
2.	非功能性需求  
1）	使小车在保持稳定运行的情况下，尽可能快的走出迷宫  
2）	尽量保持web服务器的稳定性，收到错误信息也继续维持服务  
3.	设计约束  
1）	控制小车的逻辑均在linux操作系统中实现  
2）	服务器端环境全部配置为与Linux系统对应  
3）	使用c语言实现小车走迷宫的逻辑  
4）	使用Nodejs语言搭建web服务器  
5）	客户端采用微信小程序，使用微信小程序的原生框架进行开发   

2 系统总体设计  

2.1	总体设计方案的确定  
1.	树莓派中的操作系统作为服务器端，使用nodejs语言进行开发  
2.	微信小程序作为客户端，使用微信小程序的原生框架进行开发。  
3.	小车走迷宫单独使用c语言来实现  

2.2 软硬件功能划分  
1.硬件功能  
1）使用树莓派小车中的GPIO引脚控制步进电机的运转，从而控制前后左右运动。  
2）使用树莓派小车上的超声波传感器进行测距，从而实现避障   
2.软件功能  
1）使用c语言控制树莓派中GPIO引脚，获取测距信息，以及向引脚中输入高低电平从而控制小车运转。  
2）通过微信小程序客户端向树莓派服务器端发送http或websocket请求，根据请求控制树莓派的GPIO引脚电平值，从而实现小车的正确运行。 

2.3硬件体系架构设计  
![image](https://github.com/QustRobot/AppOnCar/blob/master/images/18.png)  
青科智能小车主要由一块树莓派核心控制板、四个直流减速电机、两节锂电池、三个超声波传感器、两个不怕光红外传感器和两个底部的光传感器组成。  
超声波传感器和红外传感器可以实现避障功能，底部的光传感器可以实现循迹功能  
![image](https://github.com/QustRobot/AppOnCar/blob/master/images/19.png)  
电机 IN1（图中对应 GPIO 引脚号 12）控制左轮前进，IN2（对应 16）控制左轮后退，IN3（对应 18）控制右轮前进，IN4（对应 22）控制右轮后退。假设控制小车向左移动，即保持左轮不动，右轮前进，只需要将控制右轮前进的电机赋值为 1，故引脚状态 IN1=0， IN2=0， IN3=1，IN4=0。  

2.4 软件体系架构设计  
1. 智能小车采用树莓派核心板，安装了 Linux 系统，内置 GCC编译器及相关函数库，已经搭建了完整的开发环境。  
2.微信小程序采用原生wxss,wsml以及Js语言进行开发，可以发送正确地http请求及scoket请求。  
3.服务器端采用nodejs进行构建，主要使用nodejs包中的ws来接收websocket请求，使用nodejs包中的express来接收http的get或post请求，使用nodejs包中rpio来控制步进电机的运转。  





